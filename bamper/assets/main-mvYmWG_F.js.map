{"version":3,"file":"main-mvYmWG_F.js","sources":["../../src/imageUploader.js","../../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function () {\r\n    const fileInput = document.getElementById('fileInput');\r\n    const previewContainer = document.getElementById('previewContainer');\r\n    let filesArray = [];\r\n    // Обработчик выбора файлов\r\n    fileInput.addEventListener('change', function (e) {\r\n        const files = Array.from(e.target.files);\r\n        const newFiles = files.map(file => {\r\n            return {\r\n                file: file,\r\n                rotation: 0 // начальный угол поворота\r\n            };\r\n        });\r\n        filesArray = [...filesArray, ...newFiles];\r\n        renderPreviews();\r\n    });\r\n\r\n    // Рендер превью\r\n    function renderPreviews() {\r\n        previewContainer.innerHTML = '';\r\n\r\n        filesArray.forEach((fileObj, index) => {\r\n            const reader = new FileReader();\r\n\r\n            reader.onload = function (e) {\r\n                const previewItem = document.createElement('div');\r\n                previewItem.className = 'preview-item';\r\n                previewItem.draggable = true;\r\n                previewItem.innerHTML = `\r\n                    <img src=\"${e.target.result}\" alt=\"Preview\" style=\"transform: rotate(${fileObj.rotation}deg)\">\r\n                    <button class=\"remove-btn preview-item__remove\" data-index=\"${index}\">\r\n                        <svg width=\"10\" height=\"10\" viewBox=\"0 0 10 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M8.75 0.75L0.75 8.75M0.75 0.75L8.75 8.75\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        </svg>\r\n                    </button>\r\n                    <button class=\"rotate-btn preview-item__rotate\" data-index=\"${index}\">\r\n                        <svg width=\"15\" height=\"14\" viewBox=\"0 0 15 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M13.4167 5.41667C13.4167 5.41667 12.08 3.59548 10.9941 2.50883C9.90821 1.42218 8.4076 0.75 6.75 0.75C3.43629 0.75 0.75 3.43629 0.75 6.75C0.75 10.0637 3.43629 12.75 6.75 12.75C9.4854 12.75 11.7933 10.9195 12.5155 8.41667M13.4167 5.41667V1.41667M13.4167 5.41667H9.41667\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        </svg>\r\n                    </button>\r\n                    <div class=\"drag-handle\"></div>\r\n                    <button class=\"preview-item__main\" data-index=\"${index}\">Главная</button>\r\n                `;\r\n\r\n                // Drag and Drop события\r\n                previewItem.addEventListener('dragstart', (e) => {\r\n                    e.dataTransfer.setData('text/plain', index);\r\n                    previewItem.classList.add('dragging');\r\n                });\r\n\r\n                previewItem.addEventListener('dragend', () => {\r\n                    previewItem.classList.remove('dragging');\r\n                });\r\n\r\n                previewItem.addEventListener('dragover', (e) => {\r\n                    e.preventDefault();\r\n                });\r\n\r\n                previewItem.addEventListener('drop', (e) => {\r\n                    e.preventDefault();\r\n                    const fromIndex = parseInt(e.dataTransfer.getData('text/plain'));\r\n                    const toIndex = index;\r\n                    moveImage(fromIndex, toIndex);\r\n                });\r\n\r\n                // Установка главного изображения\r\n                const mainBtn = previewItem.querySelector('.preview-item__main');\r\n                mainBtn.addEventListener('click', function () {\r\n                    const index = parseInt(this.getAttribute('data-index'));\r\n                    mainImage(index);\r\n                });\r\n\r\n                // Удаление изображения\r\n                const removeBtn = previewItem.querySelector('.remove-btn');\r\n                removeBtn.addEventListener('click', function () {\r\n                    const index = parseInt(this.getAttribute('data-index'));\r\n                    removeImage(index);\r\n                });\r\n\r\n                // Поворот изображения\r\n                const rotateBtn = previewItem.querySelector('.rotate-btn');\r\n                rotateBtn.addEventListener('click', function () {\r\n                    const index = parseInt(this.getAttribute('data-index'));\r\n                    rotateImage(index);\r\n                });\r\n\r\n                previewContainer.appendChild(previewItem);\r\n            };\r\n\r\n            reader.readAsDataURL(fileObj.file);\r\n        });\r\n\r\n        if (filesArray.length > 0) {\r\n            document.querySelector('.block-adaptive-upload').classList.add('add-file')\r\n        } else {\r\n            document.querySelector('.block-adaptive-upload').classList.remove('add-file')\r\n        }\r\n    }\r\n\r\n    // Удаление изображения\r\n    function removeImage(index) {\r\n        filesArray.splice(index, 1);\r\n        renderPreviews();\r\n    }\r\n    // установка главного изображения\r\n    function mainImage(fromIndex) {\r\n        const [maindItem] = filesArray.splice(fromIndex, 1);\r\n        filesArray.splice(0, 0, maindItem);\r\n        renderPreviews();\r\n    }\r\n\r\n    // Перемещение изображения\r\n    function moveImage(fromIndex, toIndex) {\r\n        const [movedItem] = filesArray.splice(fromIndex, 1);\r\n        filesArray.splice(toIndex, 0, movedItem);\r\n        renderPreviews();\r\n    }\r\n\r\n    // Поворот изображения\r\n    function rotateImage(index) {\r\n        filesArray[index].rotation = (filesArray[index].rotation + 90) % 360;\r\n        renderPreviews();\r\n    }\r\n});","import './style.css';\nimport './imageUploader.js';\n\nconst selectElementWrapper = document.querySelectorAll('.custom-select-wrapper');\nif (selectElementWrapper.length > 0) {\n    selectElementWrapper.forEach(selectWrapper => {\n        const selectElement = selectWrapper.querySelector('.custom-select');\n        const clearIcon = selectWrapper.querySelector('.clear-icon');\n        function clearSelection(e) {\n            selectElement.value = \"\";\n            // Скрываем иконку\n            clearIcon.style.display = 'none';\n            // Опционально: предотвращаем всплытие события, если это необходимо в сложном UI\n            if (e) {\n                e.stopPropagation();\n            }\n            // Опционально: инициируем событие 'change', если другой код на него подписан\n            const eventChange = new Event('change');\n            selectElement.dispatchEvent(eventChange);\n        }\n        function handleSelectChange() {\n            if (selectElement.value === \"\") {\n                clearIcon.style.display = 'none';\n            } else {\n                clearIcon.style.display = 'block';\n            }\n        }\n        clearIcon.addEventListener('click', clearSelection);\n        selectElement.addEventListener('change', handleSelectChange);\n        // handleSelectChange();\n    });\n}\n"],"names":["fileInput","previewContainer","filesArray","e","newFiles","file","renderPreviews","fileObj","index","reader","previewItem","fromIndex","moveImage","mainImage","removeImage","rotateImage","maindItem","toIndex","movedItem","selectElementWrapper","selectWrapper","selectElement","clearIcon","clearSelection","eventChange","handleSelectChange"],"mappings":"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"}